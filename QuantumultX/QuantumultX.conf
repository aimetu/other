# 2024.03.15
# 配置参考:https://github.com/KOP-XIAO/QuantumultX

# 各个模块说明「基于 quantumult x 1.4.3 制作」
; 注意:去掉前面的注释符号";" "#"该行生效
; 规则逻辑：排在前面的优先级高于后面,本地规则>远程规则

# other 设置补充说明
; ➀ 在「其他设置」里「geolite2」的「来源」填写使用下面链接，并开启「自动更新」
; https://raw.githubusercontent.com/Hackl0us/GeoIP2-CN/release/Country.mmdb

# ➁ task 定时任务脚本「手动添加订阅」
; qixin 任务合集 kop-xiao 任务脚本
; https://raw.githubusercontent.com/zwf234/rules/master/QuantumultX/qixin.json
; https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/UI-Action.json

# ➂ 图标订阅「策略组长按图标订阅」
; aimetu 108*108图标
; https://raw.githubusercontent.com/aimetu/icons/main/icons.json

# ➃ http 本地服务器「浏览器打开,自行添加脚本」
; boxjs 订阅脚本挂载 substore 本地订阅转换
; http://boxjs.com
; https://sub.store

# ➄ boxjs 订阅脚本
; https://qxnav.com/rules/QuantumultX/qixin.boxjs.json
; https://raw.githubusercontent.com/xream/scripts/main/boxjs/boxjs.json

# ➅ 网络连通性检查使用的 url
; http://www.google.com/generate_204
; http://www.gstatic.com/generate_204
; http://www.qualcomm.cn/generate_204
; http://cp.cloudflare.com/generate_204
; http://captive.apple.com/generate_204

# 💡通用设置
[general]
# 关联配置路径的图标显示
profile_img_url = https://raw.githubusercontent.com/aimetu/icons/main/other/pokemon.png

# 指定 url 进行网络连接检测
network_check_url = http://www.qualcomm.cn/generate_204

# 指定 url 进行代理连接检测
server_check_url = http://www.gstatic.com/generate_204

# 节点延迟测试超时参数，需小于 5000 毫秒才生效
server_check_timeout = 3000

# 指定服务器测试时所使用的 user-agent
server_check_user_agent = Firefox/123.0

# 指定 doh 请求所使用的 user-agent
doh_user_agent = Chrome/123.0

# 资源解析器可用于自定义各类远程资源的转换，如节点，规则 filter，复写 rewrite 等，url 地址可远程，可本地/icloud ( quantumult x/scripts 目录)
resource_parser_url = https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js

# 用于节点页面的节点信息展示，可完整自定义展示内容与方式
;geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js
geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/GeoLocationChecker/QuantumultX/IP-API.js

# 网络自动切换模式,前两个表示在蜂窝跟一般 wi-fi 下（目前支持三种模式：filter/分流模式，all_proxy/全局代理，all_direct/全局直连）
;running_mode_trigger = filter, filter, OpenWrt: all_proxy, OpenWrt_5G: all_direct

# 在特定 wi-fi 网络下暂停工作（仅 task 模块会继续工作），多个 wi-fi 用 ","
;ssid_suspended_list = OpenWrt, OpenWrt_5G

# 在全局选项 "增强兼容性" 关闭时，使用特定 wi-fi，多个 wi-fi 用","
;enhanced_compatibility_ssid_list = OpenWrt, OpenWrt_5G

# 域名将不使用 fake-ip 方式,其它域名则全部采用 fake-ip 及远程解析的模式
dns_exclusion_list = *.lan, *.local, localhost, *.msftncsi.com, *.msftconnecttest.com, cable.auth.com, captive.apple.com, *.cmpassport.com, id6.me, open.e.189.cn, auth.wosms.cn, mdn.open.wo.cn, opencloud.wostore.cn, localhost.*.qq.com, localhost.*.weixin.qq.com

# udp 白名单，留空则默认所有端口,不在列表中的将被丢弃处理返回 "icmp端口不可达" 信息
udp_whitelist = 1-442, 444-65535
;udp_whitelist = 53, 80-427, 444-65535

# 仅处理 udp_whitelist 名单中的端口，同白名单类似，但不会返回 "icmp端口不可达" 信息
udp_drop_list = 443
;udp_drop_list = 1900, 80

# 仅支持末端策略（末端策略为经由规则模块和策略模块后所命中的策略，例如：direct、reject 以及节点；不支持内置策略 proxy 以及其它自定义策略）
fallback_udp_policy = direct

# 下列表中的内容将不经过 quantumult x 的处理
excluded_routes = 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 172.16.0.0/12, 192.168.0.0/16

# icmp 自动回复开关 true/false
icmp_auto_reply = true

# 默认当 dns 层面某 domain 被 reject 时将返回 loopback,可修改成为 no-error-no-answer 或 nxdomain
dns_reject_domain_behavior = loopback

# 💡本地 dns 服务器
[dns]
# 系统 dns、ipv6、doh3 开关，"no-system" 会导致系统 dns 泄露，所以未启用。服务器支持参数 included_ssids/excluded_ssids 在特定 wi-fi 下生效/失效
no-system
no-ipv6
prefer-doh3

# 默认 dns 服务器（ doq > doh3 > doh优先级查询），并发响应选取最优结果（默认53端口）
server = 223.5.5.5
server = 119.29.29.29
;server = [2400:3200::1]
;server = [2402:4e00::]

# 设置 doh 或 doh3 服务器，支持多个并发响应选取最优结果（默认 443 端口）
doh-server =  https://dns.alidns.com/dns-query, https://doh.pub/dns-query

# 设置 doq 服务器，支持 doq > doh3 > doh 混合使用,并发响应选取最优结果（默认 853 端口）
doq-server = quic://dns.alidns.com

# 指定 dns 服务器解析域名
server = /openwrt.lan/system, included_ssids = OpenWrt, OpenWrt_5G
server = /blog.google/[2402:4e00::], excluded_ssids = OpenWrt, OpenWrt_5G
address = /doh.pub/1.12.12.12
address = /dns.alidns.com/223.5.5.5
address = /dns.opendns.com/208.67.222.222
address = /talk.google.com/108.177.125.188
address = /mtalk.google.com/108.177.125.188
doh-server = /dl.google.com/https://doh.pub/dns-query
doh-server = /dl.l.google.com/https://dns.alidns.com/dns-query
doq-server = /update.googleapis.com/quic://dns.alidns.com

# 指定 alias 映射类型
alias = /openwrt/openwrt.lan

# 用于过滤如 127.0.0.1/0.0.0.0 类可能被污染的返回结果
;➀ 当并发向多个上游 dns 进行查询时，响应最快的上游 dns 抢答的结果命中了该条目，则等待其他dns服务器的响应结果（如抢答的结果中至少有一个不属于该条目，则不会等待其他 dns 的响应，此时有效结果采用不属于该条目的所有记录）
;➁ 如所有上游 dns 返回的所有结果均命中该条目，则判定为 dns 查询失败
;➂ 如配置的上游 dns 包含有去广告功能的 dns 服务器，请勿使用该参数
circumvent-ipv4-answer = 127.0.0.1, 0.0.0.0
circumvent-ipv6-answer = ::

# 💡策略组分流
;static 策略组:手动选择想要的节点/策略组
;available 策略组:按顺序选择列表中第一个可用的节点
;round-robin 策略组:按列表的顺序轮流使用其中的节点
;url-latency-benchmark 延迟策略组:选取延迟最优节点
;dest-hash 策略组:随机负载均衡,相同域名走固定节点
;ssid 策略组:根据设定的网络自动切换节点/策略组
;包含所有 = .* 或 (?i)
;节点名既有 a 又有 b = (A).*(B)    
;节点名有 a 或者 b = (A)|(B)      
;节点名不含有 a = ^((?!A).)*$ 或 ^(?!A).*    
;节点名不含有 a 同时含有 b = (?!.*(A)).*(B)    
;节点名既不含有 a 又不含有 b = ^(?!(.*(A|B).*)) 
;img-url 参数用于指定策略组图标，可远程,也可本地/icloud ( quantumult x/images 路径下)（ 108*108 大小）
;check-interval 为网络测试时间参数，单位秒, 默认更新时间为 60*10=600 秒，也就是 10 分钟
;direct/proxy/reject 则只能用本地图标，名字分别为 direct.png, proxy.png，reject.png 放置于 images 文件夹下即可生效 ( 108*108 大小)
[policy]
static = Pick, Auto, Wireless, Load Balance, Fallback, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, Chinese, direct, proxy, reject, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/pick.png
url-latency-benchmark = Auto, server-tag-regex = (?i), check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/auto.png
ssid = Wireless, proxy, Auto, OpenWrt:direct, OpenWrt_5G:direct, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/wireless.png
dest-hash = Load Balance, server-tag-regex = (?i)(🇭🇰|HK|HongKong|港|🇹🇼|TW|Taiwan|台|🇯🇵|JP|Japan|日|🇰🇷|KR|Korea|韩|🇸🇬|SG|Singapore|新|狮|🇺🇸|US|America|美), img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/load.png
available = Fallback, server-tag-regex = (?i)(🇭🇰|HK|HongKong|港|🇹🇼|TW|Taiwan|台|🇯🇵|JP|Japan|日|🇰🇷|KR|Korea|韩|🇸🇬|SG|Singapore|新|狮|🇺🇸|US|America|美), img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/fallback.png
url-latency-benchmark = HongKong, server-tag-regex = (?i)(🇭🇰|港|香港|hk|HK|Hong|HongKong), check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/hongkong.png
url-latency-benchmark = Taiwan, server-tag-regex = (?i)(🇹🇼|台|台湾|台北|臺灣|tw|TW|Tai|Taiwan), check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/taiwan.png
url-latency-benchmark = Japan, server-tag-regex = (?i)(🇯🇵|日|日本|川日|东京|大阪|泉日|埼玉|沪日|深日|jp|JP|Japan), check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/japan.png
url-latency-benchmark = Korea, server-tag-regex = (?i)(🇰🇷|韩|韓|韩国|韓國|首尔|朝鲜|kr|KR|KOR|Korea|South Korea|SouthKorea), check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/korea.png
url-latency-benchmark = Singapore, server-tag-regex = (?i)(🇸🇬|新|狮|新加坡|狮城|sg|SG|Singapore), check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/singapore.png
url-latency-benchmark = America, server-tag-regex = (?i)(🇺🇸|美|美国|美國|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|us|US|United States|UnitedStates|America), check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/america.png
url-latency-benchmark = Nations, server-tag-regex = ^((?!🇨🇳|中国|大陆|国内|回国|cn|CN|CHINA|电信|移动|联通|腾讯|阿里|教育|校园|直连|🇭🇰|港|香港|hk|HK|Hong|HongKong|🇹🇼|台|台湾|台北|臺灣|tw|TW|Tai|Taiwan|🇯🇵|日|日本|川日|东京|大阪|泉日|埼玉|沪日|深日|jp|JP|Japan|🇰🇷|韩|韓|韩国|韓國|首尔|朝鲜|kr|KR|KOR|Korea|South Korea|SouthKorea|🇸🇬|新|狮|新加坡|狮城|sg|SG|Singapore|🇺🇸|美|美国|美國|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|us|US|United States|UnitedStates|America).)*$ , check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/nations.png
url-latency-benchmark = Chinese, server-tag-regex = (?i)(🇨🇳|中国|大陆|国内|回国|cn|CN|CHINA|电信|移动|联通|腾讯|阿里|教育|校园|直连), check-interval = 600, tolerance = 0, alive-checking = false, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/chinese.png
static = Speedtest, China, Pick, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/speedtest.png
static = TikTok, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/tiktok.png
static = Telegram, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/telegram.png
static = Discord, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/discord.png
static = Spotify, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/spotify.png
static = Netflix, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/netflix.png
static = Disney+, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/disney.png
static = YouTube, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/youtube.png
static = OpenAI, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/openai.png
static = Amazon, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/amazon.png
static = Facebook, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/facebook.png
static = Google, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/google.png
static = Microsoft, China, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/microsoft.png
static = Apple, China, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/apple.png
static = Global Media, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/streaming.png
static = Global, Pick, HongKong, Taiwan, Japan, Korea, Singapore, America, Nations, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/global.png
static = China Media, China, Pick, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/media.png
static = China, direct, proxy, Pick, Wireless, Chinese, AdBlock, img-url = https://raw.githubusercontent.com/aimetu/icons/main/map/china.png
static = Final, Pick, China, AdBlock, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/final.png
static = AdBlock, reject, direct, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/adblock.png

# 💡本地代理服务器
;目前支持 ss、ssr、vmess、vless、trojan、https、socks5 等协议
[server_local]
;Shadowsocks = 10.96.154.94:8889, method = aes-128-gcm, password = password, udp-relay =false, tag = 💻 Mac
;Shadowsocks = 192.168.188.1:8889, method = aes-128-gcm, password = password, obfs = http, obfs-host = bing.com, udp-relay = false, tag = 📺 tvOS

# 💡远程代理服务器（默认可直接订阅：shadowrocket、v2ray、quantumultx，需开启资源解析器：clash、其它）
;远程服务器订阅,支持 ss、ssr、vmess、trojan、https 等协议
;img-url 参数用于指定图标，格式要求同样为 108*108 的 png 图片，可远程可本地
;tag 跟 enabled 为可选参数，分别表示"标签"及"开关状态"true/false
;update-interval 为更新时间参数，单位 "秒", 默认更新时间为 24*60*60=86400 秒，也就是 24 小时
;inserted-resource 优先本地资源之前加载
;opt-parser = true/false 用于控制是否对本订阅开启资源解析器，不写或者 false 表示不启用解析器
[server_remote]
https://sub.store/download/collection/node, tag = Subscribe, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/glados.png, update-interval = 172800, opt-parser = true, inserted-resource = true, enabled = false

# 💡远程分流规则
;update-interval 为更新时间参数,单位 "秒",默认更新时间为 24*60*60=86400 秒,也就是 24 小时
;opt-parser = true/false 用于控制是否对本订阅开启资源解析器,不写或者 false 表示不启用解析器
[filter_remote]
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Direct/Direct.list, tag = 🚥 Direct, force-policy = China, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-quanx.txt, tag = ⛔ Anti.ad, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/Cats-Team/AdRules/main/qx.conf, tag = ⛔ AdRules, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = false
https://raw.githubusercontent.com/fmz200/wool_scripts/main/QuantumultX/filter/fenliu.list, tag = ⛔ Fmz200.ad, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/AdvertisingScript/AdvertisingScript.list, tag = ⛔ AdvertisingScript, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Privacy/Privacy.list, tag = ⛔ Privacy, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Hijacking/Hijacking.list, tag = ⛔ Hijacking, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/AdvertisingLite/AdvertisingLite.list, tag = ⛔ AdvertisingLite, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/BlockHttpDNS/BlockHttpDNS.list, tag = ⛔ BlockHttpDNS, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Speedtest/Speedtest.list, tag = 🕸️ Speedtest, force-policy = Speedtest, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/TikTok/TikTok.list, tag = 🎵 TikTok, force-policy = TikTok, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Telegram/Telegram.list, tag = ✉️ Telegram, force-policy = Telegram, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Discord/Discord.list, tag = 🗣️ Discord, force-policy = Discord, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Spotify/Spotify.list, tag = 🎶 Spotify, force-policy = Spotify, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Netflix/Netflix.list, tag = 📽️ Netflix, force-policy = Netflix, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Disney/Disney.list, tag = 📼 Disney+, force-policy = Disney+, update-interval = 172800, opt-parser = true, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/YouTube/YouTube.list, tag = 📹 YouTube, force-policy = YouTube, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OpenAI/OpenAI.list, tag = 🤖 OpenAI, force-policy = OpenAI, update-interval = 172800, opt-parser = true, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Amazon/Amazon.list, tag = 🛒 Amazon, force-policy = Amazon, update-interval = 172800, opt-parser = true, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Facebook/Facebook.list, tag = 🎭 Facebook, force-policy = Facebook, update-interval = 172800, opt-parser = true, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Google/Google.list, tag = 📟 Google, force-policy = Google, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Microsoft/Microsoft.list, tag = 🖥️ Microsoft, force-policy = Microsoft, update-interval = 172800, opt-parser = true, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/SystemOTA/SystemOTA.list, tag = 🍎 Apple.ota, force-policy = AdBlock, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag = 🍎 Apple, force-policy = Apple, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/GlobalMedia/GlobalMedia.list, tag = 🎥 Global Media, force-policy = Global Media, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Global/Global.list, tag = 🌐 Global, force-policy = Global, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/ChinaMedia/ChinaMedia.list, tag = 📺 China Media, force-policy = China Media, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/China/China.list, tag = 🇨🇳 China, force-policy = China, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/ChinaIPs/ChinaIPs.list, tag = 🇨🇳 China.ips, force-policy = China, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/ChinaIPsBGP/ChinaIPsBGP.list, tag = 🇨🇳 China.ipsbgp, force-policy = China, update-interval = 172800, opt-parser = true, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/ChinaASN/ChinaASN.list, tag = 🇨🇳 China.asn, force-policy = China, update-interval = 172800, opt-parser = false, enabled = true

# 支持本地/icloud 规则文件，位于 quantumult x/profiles 路径下
;filter.txt, tag = 本地分流, enabled = false

# 💡本地分流规则
;host：完整域名匹配
;host-suffix：基于域名后缀进行判断
;host-keyword：基于域名关键词进行判断
;host-wildcard：基于域名通配符匹配
;user-agent：根据 http 的 user-agent 值来进行匹配，支持带有 *，？的通配符匹配
;ip-cidr：ipv4 范围匹配
;ip6-cidr：ipv6 范围匹配
;geoip：ip 地理位置匹配
;ip-asn：匹配 asn 域名与 ip，代替 geoip 方案提供更准确的匹配结果
;如开启其他设置中的 “分流匹配优化” 选项，则匹配优先级为
;host > host-suffix > host-keyword(wildcard) > geoip = ip-cidr > user-agennt
[filter_local]
# 完整域名匹配
host, ad.cyapi.cn, AdBlock
host, ad.21cn.com, AdBlock
host, ad.k.21cn.com, AdBlock
host, admarket.21cn.com, AdBlock
host, adshows.21cn.com, AdBlock
host, mssdk-bu.bytedance.com, AdBlock

# 域名后缀匹配
host-suffix, adx.appicad.net, AdBlock
host-suffix, m1.ad.10010.com, AdBlock

# 域名关键词匹配
host-keyword, stun, AdBlock
host-keyword, pcdn, AdBlock

# 域名通配符匹配
host-wildcard, windyty.*.*, Global

# user-agent 匹配
user-agent, pinterest*, Global

# ➀ 强制分流走蜂窝网络
;host-suffix, googleapis.com, Google, force-cellular

# ➁ 让分流走蜂窝网络跟 wi-fi 中的优选结果
;host-suffix, googleapis.com, Google, multi-interface

# ➂ 让分流走蜂窝网络跟 wi-fi 中的负载均衡，提供更大带宽出入接口
;host-suffix, googleapis.com, Google, multi-interface-balance

# ➃ 指定分流走特定网络接口
;host-suffix, googleapis.com, Google, via-interface = pdp_ip0

# ➄ %TUN% 参数，回传给 quantumult x 接口，可用于曲线实现代理链功能
;host-suffix, example.com, ServerA, via-interface = %TUN%
;ip-cidr, ServerA's IP Range, ServerB

# ➅ 本地 ipv4 匹配规则（no-resolve 只对 ip 类型的生效，域名类型的目标地址不会进行 dns 解析后再去匹配这个规则，为了防止域名类的目标地址做无效的 dns 请求）
ip-cidr, 10.0.0.0/8, direct, no-resolve
ip-cidr, 100.64.0.0/10, direct, no-resolve
ip-cidr, 127.0.0.0/8, direct, no-resolve
ip-cidr, 172.16.0.0/12, direct, no-resolve
ip-cidr, 192.168.0.0/16, direct, no-resolve
ip-cidr, 224.0.0.0/24, direct, no-resolve

# ➆ 本地 ipv6 匹配规则
ip6-cidr, fe80::/10, direct, no-resolve

# ➇ geoip 数据库地区分流规则，已采用 "🇨🇳 china|ips|bgp|asn" 远程分流规则因此可以禁用
-geoip, cn, China

# ➈ 支持如下的 geoip 库写法,需 geoip 库支持
-geoip, netflix, Netflix

# ➉ 不在规则中的请求，走 final 指定策略
final, Final

# 💡本地复写规则
[rewrite_local]
^https?:\/\/(www.)?(g|google)\.cn url 302 https://www.google.com
^https?:\/\/(ditu|maps).google\.cn url 302 https://maps.google.com
https:\/\/glados\.rocks\/api\/user\/checkin -url script-request-header https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/glados/glados.js
^https?:\/\/(?!d\.pcs).*(?<!map)\.baidu\.com\/(s|search).+(wd|word=[^&]+) url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 16_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 TraditionalTpl/1.0 ChatSearch/1.0 SearchCraft/5.5.0.21 (Baidu; P2 16.3)
^https?:\/\/(?!d\.pcs).*(?<!map)\.baidu\.com\/(s|search).+(wd|word=[^&]+) -url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 16_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 SP-engine/2.84.0 main%2F1.0 baiduboxapp/13.46.2.10 (Baidu; P2 16.3) NABar/1.0
^https:\/\/www\.google\.com\/(m|search).+(q=[^&]+) url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent:Mozilla/5.0 (iPhone; CPU iPhone OS 16_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) GSA/291.0.582931352 Mobile/15E148 Safari/604.1$2

# 💡远程复写规则
;update-interval 为更新时间参数，单位 "秒",默认更新时间为 24*60*60=86400 秒，也就是 24 小时
;opt-parser = true/false 用于控制是否对本订阅 "开启资源解析器"，不写或者 false 表示不启用解析器
[rewrite_remote]
https://raw.githubusercontent.com/aimetu/other/main/QuantumultX/add.conf, tag = 🔐 Add, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/fmz200/wool_scripts/main/QuantumultX/rewrite/chongxie.txt, tag = ⛔ ChongXie.fmz200, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/fmz200/wool_scripts/main/QuantumultX/rewrite/cookies.snippet, tag = 🍪 GetCookie.fmz200, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/MyBlockAds.conf, tag = ⛔ RuCu6.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/zwf234/rules/master/QuantumultX/qxrules.conf, tag = 🔓 Rules.qx, update-interval = 172800, opt-parser = true, enabled = false
https://raw.githubusercontent.com/zwf234/rules/master/getCookie.conf, tag = 🏷️ Cookie.qx, update-interval = 172800, opt-parser = false, enabled = false
https://raw.githubusercontent.com/Moli-X/Resources/main/Rewrite/Ximalaya.conf, tag = 📻 Ximalaya.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/weibo.snippet, tag = 👀 WeiBo.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/xiaohongshu.snippet, tag = 📕 XiaoHongShu.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/BiliUniverse/ADBlock/main/modules/BiliBili.ADBlock.snippet, tag = 🎬 BiliBili.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/ZenmoFeiShi/Qx/main/HP.snippet, tag = 🏀 HuPu.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/smzdm.snippet, tag = 🛍️ Smzdm.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/zhihu.snippet, tag = 📖 ZhiHu.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/amap.snippet, tag = 🗺️ Amap.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/bdmap.snippet, tag = 🗺️ BDmap.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/app2smile/rules/master/module/tieba-qx.conf, tag = 📃 TieBa.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/youtube.snippet, tag = 📹 YouTube.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/Semporia/TikTok-Unlock/master/Quantumult-X/TikTok-US.conf, tag = 🎵 TikTok, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/DualSubs/YouTube/main/modules/DualSubs.YouTube.snippet, tag = 🍿️ YouTube, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/DualSubs/Universal/main/modules/DualSubs.Universal.snippet, tag = 🍿️ Streaming, update-interval = 172800, opt-parser = false, enabled = false
https://raw.githubusercontent.com/VirgilClyne/Cloudflare/main/modules/Cloudflare.1.1.1.1.snippet, tag = ☁️ Cloudflare, update-interval = 172800, opt-parser = false, enabled = false
https://raw.githubusercontent.com/GeQ1an/Rules/master/QuantumultX/Rewrite/Rewrite.list, tag = 📝 Rewrite, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/StartUp.conf, tag = 📲 StartUp.ad, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/app2smile/rules/master/module/adsense.conf, tag = ⛔ AdSense, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/BlockHTTPDNS/BlockHTTPDNS.conf, tag = ⛔ BlockHTTPDNS, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/SafeRedirect/SafeRedirect.conf, tag = 🔒 SafeRedirect, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/Redirect/Redirect.conf, tag = ✍️ Redirect, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/Upgrade/Upgrade.conf, tag = ⛔ Upgrade, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/AdvertisingScript/AdvertisingScript.conf, tag = ⛔ AdvertisingScript, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/AdvertisingLite/AdvertisingLite.conf, tag = ⛔ AdvertisingLite, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag = 🗃️ BoxJs, update-interval = 172800, opt-parser = false, enabled = true
https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/config/QX.snippet, tag = 📍 Substore, update-interval = 172800, opt-parser = false, enabled = false

# 支持本地/icloud 的复写规则文件，位于 quantumult x/profiles 路径下
;rewrite.txt,tag = 本地复写, opt-parser = false, enabled = false

# 💡本地定时任务脚本
;包含➂种类型：cron 定时任务，ui 交互脚本，网络切换脚本
;js 文件放于 icloud 或者本机的 quantumult x/scripts 路径下，可直接使用远程 js 链接
;img-url 参数用于指定 task 的图标( 108*108 )
;从"分"开始的 5 位 cron 写法，具体表达式可参考：https://crontab.guru
;比如："*/30 * * * *"代表每隔 30 分钟自动执行一次
[task_local]
# ➀ cron 定时任务，可用于签到,天气话费查询等
30 21 * * * https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/ssq/ssq.js, tag = 🎫 Lottery, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/lottery.png, enabled = true
0 12 * * * https://ooxx.be/js/maoyan.js, tag = 🎬 MaoYan, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/maoyan.png, enabled = true
0 10 * * * https://ooxx.be/js/bing.js, tag = 🖼️ BingWallpaper, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/picture.png, enabled = true
0 10 * * * https://raw.githubusercontent.com/Peng-YM/QuanX/master/Tasks/exchange.js, tag = 💰 Exchange, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/exchange.png, enabled = true
0 10 * * * https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/appstore/AppMonitor.js, tag = 📱 AppMonitor, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/appstore.png, enabled = true
0 9 * * * https://raw.githubusercontent.com/githubdulong/Script/master/One.js, tag = 📖 One, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/one.png, enabled = true
0 9 * * * https://raw.githubusercontent.com/chavyleung/scripts/master/zaker/zaker.js, tag = 📰 ZaKer, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/zaker.png, enabled = true
0 9 * * * https://raw.githubusercontent.com/lowking/Scripts/master/bing/bingPoint.js, tag = 🔎 Bing, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/bing.png, enabled = true
0 8 * * * https://raw.githubusercontent.com/lowking/Scripts/master/ali/aliYunPanCheckIn.js, tag = ☁️ AliYunPan, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/aliyunpan.png, enabled = true
0 8 * * * https://raw.githubusercontent.com/ClydeTime/Quantumult/main/Script/Task/xmlySign.js, tag = 📻 Ximalaya, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/xmly.png, enabled = true
0 8 * * * https://raw.githubusercontent.com/ClydeTime/BiliBili/main/js/BiliBiliDailyBonus.js, tag = 🦋 BiliBili, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/bilibili.png, enabled = true
0 7 * * * https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/nasa/nasapic.js, tag = 🌕 Nasa, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/nasa.png, enabled = true
0 7 * * * https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/idaily/idaily.js, tag = 🌐 iDaily, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/idaily.png, enabled = true
0 7 * * * https://raw.githubusercontent.com/TributePaulWalker/Profiles/main/JavaScript/Surge/wnCalendar.js, tag = 📅 Calendar, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/calendar.png, enabled = true
0 6 * * * https://raw.githubusercontent.com/songyangzz/QuantumultX/master/elem/elemSign.js, tag = 👨‍🍳 Eleme, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/eleme.png, enabled = true
0 6 * * * https://raw.githubusercontent.com/chavyleung/scripts/master/meituan/meituan.js, tag = 🦘 MeiTuan, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/meituan.png, enabled = true
0 6 * * * https://raw.githubusercontent.com/NobyDa/Script/master/JD-DailyBonus/JD_DailyBonus.js, tag = 🐶 JingDong, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/jingdong.png, enabled = true
0 6 * * * https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/glados/glados.js, tag = ☁️ GLaDos, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/glados.png, enabled = false
30 7-22/7 * * * https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/weibo/weibotalk.js, tag = 👀 WeiBo, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/weibo.png, enabled = true
30 7-22/7 * * * https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/wechatsubs/wechatsubs.js, tag = 💬 WeChatSubs, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/wechat.png, enabled = true
30 7-22/7 * * * https://raw.githubusercontent.com/evilbutcher/QuantumultX/master/check_in/hotsearch/hot.js, tag = 🔥 HotSearch, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/hotsearch.png, enabled = true
30 6-22/5 * * * https://raw.githubusercontent.com/Peng-YM/QuanX/master/Tasks/caiyun.js, tag = 🌤️ CaiYun, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/caiyun.png, enabled = true
0 0 * * * https://raw.githubusercontent.com/unknowntokyo/surge-list/master/X/dns-clear-cache.js, tag = 🗑️ DNS, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/dns.png, enabled = true
0 0 1 1 * ? https://raw.githubusercontent.com/chavyleung/scripts/master/box/scripts/boxjs.revert.caches.js, tag = 🗃️ BoxJs, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/box.png, enabled = false

# ➁ ui 交互查询脚本，在首页长按 "节点/策略组" 唤出
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/geo_location.js, tag = 🗺️ GeoIP, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/geoip.png, enabled = true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/traffic-check.js, tag = 🕸️ Flow, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/network.png, enabled = true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-google.js, tag = 📟 Google, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/googlelogo.png, enabled = true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/nf-ui-check.js, tag = 📽️ Netflix, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/netflixlogo.png, enabled = true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/disney-ui-check.js, tag = 📼 Disney+, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/disneylogo.png, enabled = true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/ytb-ui-check.js, tag = 📹 YouTube, img-url = https://raw.githubusercontent.com/aimetu/icons/main/logo/youtubelogo.png, enabled = true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag = 🎥 Streaming, img-url = https://raw.githubusercontent.com/aimetu/icons/main/other/streaming.png, enabled = true

# ➂ 网络切换/变化时触发的脚本类型
;event-network sample-taks.js

# 💡本地 http 服务器
[http_backend]
https://raw.githubusercontent.com/chavyleung/scripts/master/chavy.box.js, tag = 🗃️ BoxJs, path = ^/, enabled = false

# 💡解密 https 的请求,需安装证书并信任
[mitm]
# 当使用 quantumult x 在 m 芯片的 mac 设备上作为局域网网关时，使用下面的参数来跳过某些特定设备的 mitm 需求
;skip_src_ip = 192.168.188.58, 192.168.188.88

# 当多个不同的 tcp 连接（非域名类请求）的目标 ip 不同，但这些连接的 tsl 握手 sni 字段相同时，如需跳过其中某些连接的 mitm hostname 匹配过程，可使用以下参数
;skip_dst_ip = 17.0.0.1

# 跳过证书验开关 true/false
skip_validating_cert = true

# 强制sni域名开关 true/false
force_sni_domain_name = false

# 需解密的域名，可以使用通配符 * 或 ？ 来表示域名，以 - 开头来排除域名
hostname = g.cn, *.google.cn, glados.rocks

# 生成的证书参数
;passphrase =  
;p12 =  
