# 2024.11.08
# å®˜ç½‘ï¼šhttps://stash.wiki
# é…ç½®æ ·ä¾‹ï¼šhttps://stash.wiki/configuration/example-config

# å„ä¸ªæ¨¡å—è¯´æ˜ã€ŒåŸºäº stash 2.7.0 åˆ¶ä½œã€
# æ³¨æ„ï¼šå»æ‰å‰é¢çš„æ³¨é‡Šç¬¦å· "#" è¯¥è¡Œç”Ÿæ•ˆï¼Œï¼ˆå¼€å¯å…³é—­å‚æ•°ï¼štrue/falseï¼‰
# è§„åˆ™é€»è¾‘ï¼šæ’åœ¨å‰é¢çš„ä¼˜å…ˆçº§é«˜äºåé¢çš„ï¼Œæœ¬åœ°è§„åˆ™ > æ’ä»¶è§„åˆ™ > è®¢é˜…è§„åˆ™

# other è®¾ç½®è¡¥å……è¯´æ˜
# è‡ªå®šä¹‰ geoip & ipasn æ•°æ®åº“
# https://github.com/Hackl0us/GeoIP2-CN
# https://github.com/Loyalsoldier/geoip
# https://github.com/P3TERX/GeoLite.mmdb
# https://github.com/MetaCubeX/meta-rules-dat

# å›¾æ ‡è®¢é˜…ã€Œæ›´å¤š -ui é…ç½® - å›¾æ ‡é›†ã€
# aimetu 108*108 å›¾æ ‡
# https://raw.githubusercontent.com/aimetu/icons/main/icons.json

# http æœ¬åœ°æœåŠ¡å™¨ã€Œæµè§ˆå™¨æ‰“å¼€ã€
# boxjs è®¢é˜…è„šæœ¬æŒ‚è½½ substore æœ¬åœ°è®¢é˜…è½¬æ¢
# http://boxjs.com
# https://sub.store

# boxjs è®¢é˜…è„šæœ¬
# https://raw.githubusercontent.com/Peng-YM/QuanX/master/Tasks/box.js.json
# https://raw.githubusercontent.com/evilbutcher/Quantumult_X/master/evilbutcher.boxjs.json
# https://qxnav.com/rules/QuantumultX/qixin.boxjs.json
# https://raw.githubusercontent.com/xream/scripts/main/boxjs/boxjs.json

# ç½‘ç»œè¿é€šæ€§æ£€æŸ¥ä½¿ç”¨çš„ url
# http://www.google.com/generate_204
# http://www.gstatic.com/generate_204
# http://www.qualcomm.cn/generate_204
# http://wifi.vivo.com.cn/generate_204
# http://cp.cloudflare.com/generate_204
# http://captive.apple.com/generate_204

# ğŸ’¡ é€šç”¨è®¾ç½®
# ç½‘ç»œæ¨¡å¼ï¼šrule è§„åˆ™ã€global ä»£ç†ã€direct ç›´è¿
mode: rule

# æ—¥å¿—æ¨¡å¼ï¼šsilent é™é»˜ã€info ä¿¡æ¯ã€warning è­¦å‘Šã€error é”™è¯¯ã€debug è°ƒè¯•
log-level: info

# ğŸ’¡ ä»£ç†æœåŠ¡ä¿¡æ¯åœ¨ä¸»é¡µæ˜¾ç¤º
subscribe-url: è¾“å…¥è®¢é˜…é“¾æ¥

# ğŸ’¡ è¿œç¨‹ä»£ç†æœåŠ¡å™¨è®¢é˜…é“¾æ¥
proxy-providers:
  Subscribe:
    url: http://sub.store/download/collection/node
    interval: 86400
    filter: "^(?!.*è®¢é˜…|æµé‡|å‰©ä½™|å¥—é¤|åˆ°æœŸ|é‡ç½®|è·ç¦»|è¿‡æœŸ|çº¿è·¯|å®˜ç½‘|ç½‘ç«™|ç½‘å€|åœ°å€|å¤‡ç”¨|å®¢æœ|ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å·²ç”¨|è”ç³»|é‚®ç®±).*(?i)"
    benchmark-url: http://www.gstatic.com/generate_204
    benchmark-timeout: 3
   
# ğŸ’¡ æœ¬åœ°ä»£ç†æœåŠ¡å™¨ï¼ˆæ”¯æŒ ssã€ssrã€socks5ã€httpã€httpsã€vmessã€vlessã€trojanã€hysteriaã€snellã€tuicã€wireguard ç­‰åè®®ï¼‰
proxies:
 - name: â˜ï¸ Warp Client
   type: wireguard
   # wireguard ä»£ç†æœåŠ¡å™¨åœ°å€ï¼šengage.cloudflareclient.comï¼Œ162.159.192/193/195/204.0/24ï¼Œï¼ˆudp ç«¯å£:2408ï¼Œå¤‡é€‰ 500ã€1701ã€4500ï¼‰warp æœåŠ¡å™¨ä¼˜é€‰å‚è€ƒï¼šhttps://gitlab.com/Misaka-blog/warp-script
   server: 162.159.192.1
   port: 2408
   ip: 172.16.0.2
   ipv6: 2606:4700:110:88a4:fa34:70a2:56b7:ead6
   private-key: nvWCeA9If1axAV3HnZ5oCsck6aPb/+I/+yhbPorfSFU=
   public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=
   dns: [1.1.1.1,2606:4700:4700::1111]
   mtu: 1280
   reserved: [17,176,6]
   keepalive: 45
   benchmark-url: http://cp.cloudflare.com/generate_204
   benchmark-timeout: 3
# è‹¥ä½¿ç”¨ underlying-proxyï¼Œå…¶å¿…é¡»æ”¯æŒ udp ä¸­ç»§ï¼Œå»ºè®®ä½¿ç”¨ udp over tcp çš„åè®®ï¼ˆå¦‚ trojanã€vlessã€vmessã€snell ï¼‰  
#   underlying-proxy: 
#     type: trojan
#     server: your-underlying-proxy
#     port: 443
#     password: your-password

 - name: â˜ï¸ Warp Zero
   type: wireguard
   server: 162.159.193.1
   port: 2408
   ip: 172.16.0.2
   ipv6: 2606:4700:110:82f0:bb8c:8f76:fdf0:e565
   private-key: CJ+a9D/TltH3gxM3hg2jdyeyctYkjw6Tym4hje+H9EQ=
   public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=
   dns: [1.1.1.1,2606:4700:4700::1111]
   mtu: 1280
   reserved: [197,215,83]
   keepalive: 45
   benchmark-url: http://cp.cloudflare.com/generate_204
   benchmark-timeout: 3
# è‹¥ä½¿ç”¨ underlying-proxyï¼Œå…¶å¿…é¡»æ”¯æŒ udp ä¸­ç»§ï¼Œå»ºè®®ä½¿ç”¨ udp over tcp çš„åè®®ï¼ˆå¦‚ trojanã€vlessã€vmessã€snell ï¼‰  
#   underlying-proxy: 
#     type: trojan
#     server: your-underlying-proxy
#     port: 443
#     password: your-password

 - name: â˜ï¸ Warp Team
   type: wireguard
   server: 162.159.195.1
   port: 2408
   ip: 172.16.0.2
   ipv6: 2606:4700:110:8f21:225d:3e30:7660:78cf
   private-key: QOmt5UE2jp5s2vqYMKmjd714tBC7eteELAFRCEinJG4=
   public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=
   dns: [1.1.1.1,2606:4700:4700::1111]
   mtu: 1280
   reserved: [80,73,10]
   keepalive: 45
   benchmark-url: http://cp.cloudflare.com/generate_204
   benchmark-timeout: 3
# è‹¥ä½¿ç”¨ underlying-proxyï¼Œå…¶å¿…é¡»æ”¯æŒ udp ä¸­ç»§ï¼Œå»ºè®®ä½¿ç”¨ udp over tcp çš„åè®®ï¼ˆå¦‚ trojanã€vlessã€vmessã€snell ï¼‰  
#   underlying-proxy: 
#     type: trojan
#     server: your-underlying-proxy
#     port: 443
#     password: your-password

 - name: â˜ï¸ Warp Plus
   type: wireguard
   server: 162.159.195.5
   port: 2408
   ip: 172.16.0.2
   ipv6: 2606:4700:110:89db:66c6:5265:3a6f:b92
   private-key: wEPBA9NACxZ+lfcTD0yFDrx83RNWseNw2O3yJYWeVmk=
   public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=
   dns: [1.1.1.1,2606:4700:4700::1111]
   mtu: 1280
   reserved: [173,82,247]
   keepalive: 45
   benchmark-url: http://cp.cloudflare.com/generate_204
   benchmark-timeout: 3
# è‹¥ä½¿ç”¨ underlying-proxyï¼Œå…¶å¿…é¡»æ”¯æŒ udp ä¸­ç»§ï¼Œå»ºè®®ä½¿ç”¨ udp over tcp çš„åè®®ï¼ˆå¦‚ trojanã€vlessã€vmessã€snell ï¼‰  
#   underlying-proxy: 
#     type: trojan
#     server: your-underlying-proxy
#     port: 443
#     password: your-password

 - name: â˜ï¸ Warp Cloud
   type: vless
   server: 162.159.128.118
   port: 80
   uuid: 58935f45-89c2-4b82-a77c-72eee801da09
   tls: false
   skip-cert-verify: true
   sni: cloudwork.aimeto.workers.dev
   network: ws
   ws-opts:
     path: "/?ed=2048"
     headers:
       Host: cloudwork.aimeto.workers.dev
   alterId: 0
   cipher: ""
   flow: ""

 - name: â˜ï¸ Warp Workers
   type: vless
   server: 141.101.122.184
   port: 80
   uuid: a6857f71-33c0-4584-8772-c38160210cf2
   tls: false
   skip-cert-verify: true
   sni: sub.aimeto.workers.dev
   network: ws
   ws-opts:
     path: "/?ed=2048"
     headers:
       Host: sub.aimeto.workers.dev
   alterId: 0
   cipher: ""
   flow: ""

 - name: â˜ï¸ Warp Pages
   type: vless
   server: c.aimetu.cloudns.be
   port: 443
   uuid: 58935f45-89c2-4b82-a77c-72eee801da09
   tls: true
   skip-cert-verify: true
   sni: aimeto.pages.dev
   network: ws
   ws-opts:
     path: "/?ed=2048"
     headers:
       Host: aimeto.pages.dev
   alterId: 0
   cipher: ""
   flow: ""
   
 - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬*1
   type: ss
   server: 149.22.87.204
   port: 443
   cipher: aes-128-gcm
   password: shadowsocks
   udp: true
   benchmark-url: http://www.gstatic.com/generate_204
   benchmark-timeout: 3
   
 - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬*2
   type: ss
   server: 149.22.87.241
   port: 443
   cipher: aes-128-gcm
   password: shadowsocks
   udp: true
   benchmark-url: http://www.gstatic.com/generate_204
   benchmark-timeout: 3

 - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬*3
   type: ss
   server: 149.22.87.240
   port: 443
   cipher: aes-128-gcm
   password: shadowsocks
   udp: true
   benchmark-url: http://www.gstatic.com/generate_204
   benchmark-timeout: 3
   
 - name: ğŸ‡³ğŸ‡± è·å…°*1
   type: ss
   server: 109.201.152.181
   port: 443
   cipher: aes-128-cfb
   password: shadowsocks
   udp: true
   benchmark-url: http://www.gstatic.com/generate_204
   benchmark-timeout: 3
   
# ğŸ’¡ dns æœåŠ¡å™¨é…ç½®
dns:
# è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œè§£å†³éƒ¨åˆ†å…¼å®¹æ€§é—®é¢˜
  skip-cert-verify: true
# é»˜è®¤æƒ…å†µä¸‹ dns æŸ¥è¯¢ä¼šç›´æ¥å‡ºç«™ä¸ç»è¿‡ä»£ç†è§„åˆ™,å¼€å¯åä¼šæ ¹æ®ä»£ç†è§„åˆ™è¿›è¡Œ dns æŸ¥è¯¢çš„è½¬å‘
  follow-rule: false
# ä»¥ä¸‹åŸŸåä¸ä¼šè¢«è§£æä¸º fake-ipï¼Œè§£æè¯·æ±‚å°†è¿”å›å®ƒä»¬çœŸå®çš„ IP åœ°å€
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "localhost"
    - "WORKGROUP"
    - "*.msftncsi.com"
    - "*.msftconnecttest.com"
    - "cable.auth.com"
    - "captive.apple.com"
    - "*.cmpassport.com"
    - "id6.me"
    - "open.e.189.cn"
    - "mob.com"
    - "hmrz.wo.cn"
    - "auth.wosms.cn"
    - "mdn.open.wo.cn"
    - "id.mail.wo.cn"
    - "opencloud.wostore.cn"
    - "nishub1.10010.com"
    - "enrichgw.10010.com"
    - "localhost.*.qq.com"
    - "localhost.*.weixin.qq.com"
    
# é»˜è®¤ dns æœåŠ¡å™¨åªä¼šè¢«ç”¨æ¥è§£æ dns æœåŠ¡çš„åŸŸåï¼Œä»…å…è®¸ ip åœ°å€
  default-nameserver:
    - system
    - 223.5.5.5
    - '2400:3200::1'
    
# æ”¯æŒ udpã€tcpã€dotã€dohã€doq åè®®çš„ dns æœåŠ¡ï¼Œå¯æŒ‡å®šç«¯å£ï¼Œå¹¶å‘å“åº”æœ€å¿«æœåŠ¡
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
    - quic://dns.alidns.com
    
# geoip è¿‡æ»¤ cn ä»¥å¤–çš„åœ°å€ï¼ŒæŒ‡å®šåˆ° fallback  
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      
# å½“ geoip ä¸æ˜¯ cn æ—¶ç”¨ä»¥ä¸‹ dns è§£æ 
  fallback:
    - https://dns.google/dns-query
    - https://dns.opendns.com/dns-query
    - https://cloudflare-dns.com/dns-query
    #- quic://dns.adguard-dns.com

# åŸŸåä½¿ç”¨æŒ‡å®šçš„ dns æœåŠ¡å™¨è§£æ
  nameserver-policy:
    "openwrt.lan": system
    "openwrt.local": system
    "blog.google": 119.29.29.29
    "dl.google.com": https://doh.pub/dns-query
    "dl.l.google.com": https://dns.alidns.com/dns-query
    "update.googleapis.com": quic://dns.alidns.com

# ğŸ’¡ æœ¬åœ°åŸŸåæ˜ å°„
hosts:
  "*.clash.dev": 127.0.0.1
  "*.dev": 127.0.0.1
  "alpha.clash.dev": '::1'
  "doh.pub": 120.53.53.53
  "dns.alidns.com": 223.5.5.5
  "talk.google.com": 108.177.125.188
  "mtalk.google.com": 108.177.125.188
    
# ğŸ’¡ http3/quic åè®®åŸºäº udpï¼Œåœ¨ç›®å‰çš„ç½‘ç»œç¯å¢ƒä¸‹è¾ƒä¸ºä½æ•ˆ,ç¦ç”¨ quic åè®®
script:
  shortcuts:
    quic: network == 'udp' and (dst_port == 443 or dst_port == 3478 or dst_port == 19302)  # å±è”½ http3/quic,è®©æµé‡å›è½è‡³ http2,é¿å… udp è¢« qos

# ğŸ’¡ http å¼•æ“ç›¸å…³
http:
# å¼ºåˆ¶ä½¿ç”¨ http å¼•æ“å¤„ç† tcp è¿æ¥ 
  force-http-engine:
    - boxer.baidu.com

# å¼€å¯ mitm åŠŸèƒ½çš„åŸŸååˆ—è¡¨,éœ€å®‰è£…è¯ä¹¦å¹¶ä¿¡ä»»
  mitm:
    - "*.g.cn"
    - "*.google.cn"
    - "boxer.baidu.com"
    - "*.tiktokv.com"
    - "*.byteoversea.com"
    - "*.tik-tokapi.com"
    
# https-url é‡å†™æ”¯æŒ headerã€302ã€307ã€reject å¤šç§ç­–ç•¥
  url-rewrite:
    - ^https?:\/\/(www|m)\.(g|google)\.cn http://www.google.com header
    - ^https?:\/\/(ditu|maps)\.google\.cn https://www.google.com 302
    - (?<=_region=)CN(?=&) KR 307
    - (?<=&mcc_mnc=)4 2 307
    - ^(https?:\/\/(tnc|dm)[\w-]+\.\w+\.com\/.+)(\?)(.+) $1$3 302
    - (^https?:\/\/*\.\w{4}okv.com\/.+&.+)(\d{2}\.3\.\d)(.+) $118.0$3 302

# https-header é‡å†™å…è®¸ç”¨æˆ·å¢åŠ ã€åˆ é™¤ã€æ›¿æ¢ http è¯·æ±‚/å“åº”çš„ä»»æ„ header
  header-rewrite:
    - ^https?:\/\/(www|m)\.(g|google)\.cn request-add DNT 1
    - ^https?:\/\/(www|m)\.(g|google)\.cn request-del DNT
    - ^https?:\/\/(www|m)\.(g|google)\.cn request-replace DNT 1
    - ^https?:\/\/(www|m)\.(g|google)\.cn request-replace-regex User-Agent Go-http-client curl

# ä½¿ç”¨ javascript è„šæœ¬æ”¹å†™ https è¯·æ±‚
  script:
    - match: ^https:\/\/boxer\.baidu\.com\/scheme\?scheme
      name: baidu
      type: response
      require-body: false
      timeout: 10

# å®šæ—¶ javascript è„šæœ¬ä»»åŠ¡
cron:
  script:
    - name: baidu  # å¼•ç”¨ script-providers ä¸­çš„è„šæœ¬
      cron: '0 8 * * *'  # cron è¡¨è¾¾å¼ï¼Œå…·ä½“è¡¨è¾¾ç¤ºå‚è€ƒï¼šhttps://crontab.guru
      timeout: 10   # script timeout in second ( optional )
      argument: ''  # script argument ( optional )
      debug: false  # å¼€å‘æ¨¡å¼ï¼Œæ¯æ¬¡æ‰§è¡Œå‰ä¼šä» provider åŠ è½½æœ€æ–°è„šæœ¬
      
    - name: ip-tile
      cron: '0 0 * * *'
      timeout: 10
      argument: ''
      debug: false
      
    - name: network-tile
      cron: '0 0 * * *'
      timeout: 10
      argument: ''
      debug: false
      
    - name: timecard-tile
      cron: '0 8 * * *'
      timeout: 10
      argument: ''
      debug: false
      
# é¦–é¡µ tile é¢æ¿
tiles: 
  - name: ip-tile
    interval: 3600
    title: ç½‘ç»œä¿¡æ¯æŸ¥è¯¢
    content: æ­£åœ¨æŸ¥è¯¢è¯·ç¨å€™
    icon: https://raw.githubusercontent.com/aimetu/icons/main/other/geoip.png
    backgroundColor: '#00a6ac'
    
  - name: network-tile
    interval: 3600
    title: ç½‘ç»œä¿¡æ¯æŸ¥è¯¢
    content: æ­£åœ¨æŸ¥è¯¢è¯·ç¨å€™
    icon: https://raw.githubusercontent.com/aimetu/icons/main/other/network.png
    backgroundColor: '#00a6ac'

  - name: timecard-tile
    interval: 86400
    title: èŠ‚å‡æ—¥ä¿¡æ¯æŸ¥è¯¢
    content: æ¼«é•¿çš„ç­‰å¾…ä¸­
    icon: https://raw.githubusercontent.com/aimetu/icons/main/other/calendar.png
    backgroundColor: '#b3424a'

# è¿œç¨‹èµ„æºè„šæœ¬æ¨¡å¼
script-providers:
  baidu:
    url: https://raw.githubusercontent.com/app2smile/rules/master/js/baidu-no-redirect.js
    interval: 86400

  ip-tile:
    url: https://raw.githubusercontent.com/aimetu/other/main/Stash/ip.js
    interval: 86400
    
  network-tile:
    url: https://raw.githubusercontent.com/aimetu/other/main/Stash/network.js
    interval: 86400
    
  timecard-tile:
    url: https://raw.githubusercontent.com/smartmimi/conf/master/surge/timecard.js
    interval: 86400

# ğŸ’¡ ç­–ç•¥ç»„
proxy-groups: 
- name: Pick
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/pick.png
  proxies:
  - Auto
  - Node
  - Wireless
  - Fallback
  - Load Balance
  - Proxy Chain
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  - Chinese
  - DIRECT
  - REJECT

- name: Auto
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/auto.png
  url: http://www.gstatic.com/generate_204
  interval: 600
# lazyï¼šæ‡’æƒ°æ¨¡å¼ï¼Œå¦‚æœè®¾ç½®ä¸º trueï¼Œç­–ç•¥ç»„åœ¨æœªè¢«ä½¿ç”¨æ—¶åœæ­¢æ£€æµ‹  
  lazy: true
# hidden åœ¨åˆ—è¡¨ä¸­éšè—ç­–ç•¥ç»„å¼€å…³
  hidden: false
# include-all: trueï¼Œå¼•ç”¨æ‰€æœ‰çš„ä»£ç†å’Œè¿œç¨‹ä»£ç†é›†  
  include-all: true
  filter: ^(?!.*Warp|è®¢é˜…|æµé‡|å‰©ä½™|å¥—é¤|åˆ°æœŸ|é‡ç½®|è·ç¦»|è¿‡æœŸ|çº¿è·¯|å®˜ç½‘|ç½‘ç«™|ç½‘å€|åœ°å€|å¤‡ç”¨|å®¢æœ|ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å·²ç”¨|è”ç³»|é‚®ç®±).*(?i)

- name: Node
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/node.png
  lazy: true
  hidden: false
  include-all: true

- name: Wireless
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/wireless.png
  lazy: true
  hidden: false
  proxies:
  - Auto
  - Node
  - DIRECT
  ssid-policy:
    cellular: Node 
    default: Auto
    OpenWrt: DIRECT 
    OpenWrt_5G: DIRECT

# Fallbackï¼šåœ¨ç¡®ä¿æœåŠ¡å™¨å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œç”±ä¸Šè‡³ä¸‹è‡ªåŠ¨é€‰æ‹©æœåŠ¡å™¨ï¼Œä¸å¥åº·çš„ä»£ç†ä¼šè¢«è·³è¿‡  
- name: Fallback
  type: fallback
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/fallback.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  proxies:
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
    
# Load Balanceï¼šèƒ½å……åˆ†åˆ©ç”¨å¤šä¸ªä»£ç†çš„å¸¦å®½ï¼Œä¸å¥åº·çš„ä»£ç†ä¼šè¢«è·³è¿‡
- name: Load Balance
  type: load-balance
# strategy: consistent-hashingã€round-robinï¼Œä¸€èˆ¬å»ºè®®è®¾ç½®ä¸º consistent-hashingï¼Œé¿å…é¢‘ç¹æ”¹å˜ ip è§¦å‘æœåŠ¡ç«¯çš„å®‰å…¨ç­–ç•¥ 
  strategy: consistent-hashing
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/load.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  proxies:
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

# ä»£ç†è½¬å‘é“¾ï¼Œæµé‡å°†é€šè¿‡ä¸€ç³»åˆ—çš„ä»£ç†è½¬å‘åˆ°è¾¾ç›®çš„åœ°ï¼Œä»…æ”¯æŒè½¬å‘ tcpã€‚relay ç­–ç•¥ç»„å¹¶ä¸å—åˆ°å†…éƒ¨ä»£ç†å»¶è¿Ÿæµ‹è¯•çš„ç»“æœå½±å“ï¼Œéœ€è¦å•ç‹¬æŒ‡å®šæµ‹è¯• url
- name: Proxy Chain
  type: relay
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/chain.png
# å»ºè®®åªä½¿ç”¨ HTTP åè®®  
  benchmark-url: http://www.gstatic.com/generate_204
# å»¶è¿Ÿæµ‹è¯•è¶…æ—¶ï¼Œå•ä½ï¼šç§’  
  benchmark-timeout: 5
  interval: 600  
  lazy: true
  hidden: false
# æµé‡: stash <-> http <-> vmess <-> ss1 <-> ss2 <-> äº’è”ç½‘
  proxies:
    - HongKong
    - â˜ï¸ Warp Cloud

- name: HongKong
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/hongkong.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  include-all: true
  filter: ^(?!.*Warp).*(ğŸ‡­ğŸ‡°|æ¸¯|é¦™æ¸¯|hk|HK|Hong|HongKong)
  
- name: Taiwan
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/taiwan.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  include-all: true
  filter: ^(?!.*Warp).*(ğŸ‡¹ğŸ‡¼|å°|å°æ¹¾|å°åŒ—|è‡ºç£|tw|TW|Tai|Taiwan)
  
- name: Japan
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/japan.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  include-all: true
  filter: ^(?!.*Warp).*(ğŸ‡¯ğŸ‡µ|æ—¥|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|jp|JP|Japan)
  
- name: Korea
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/korea.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  include-all: true
  filter: ^(?!.*Warp).*(ğŸ‡°ğŸ‡·|éŸ©|éŸ“|éŸ©å›½|éŸ“åœ‹|é¦–å°”|æœé²œ|kr|KR|KOR|Korea|South Korea|SouthKorea)
  
- name: Singapore
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/singapore.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  include-all: true
  filter: ^(?!.*Warp).*(ğŸ‡¸ğŸ‡¬|æ–°|ç‹®|æ–°åŠ å¡|ç‹®åŸ|sg|SG|Singapore)
  
- name: America
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/america.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  include-all: true
  filter: ^(?!.*Warp).*(ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|ç¾åœ‹|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|us|US|United States|UnitedStates|America)
    
- name: Nations
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/nations.png
  url: http://www.gstatic.com/generate_204
  interval: 600
  lazy: true
  hidden: false
  include-all: true
  filter: ^((?!Cloudflare|ğŸ‡¨ğŸ‡³|ä¸­å›½|å¤§é™†|å›½å†…|å›å›½|cn|CN|CHINA|ç”µä¿¡|ç§»åŠ¨|è”é€š|è…¾è®¯|é˜¿é‡Œ|æ•™è‚²|æ ¡å›­|ç›´è¿|ğŸ‡­ğŸ‡°|æ¸¯|é¦™æ¸¯|hk|HK|Hong|HongKong|ğŸ‡¹ğŸ‡¼|å°|å°æ¹¾|å°åŒ—|è‡ºç£|tw|TW|Tai|Taiwan|ğŸ‡¯ğŸ‡µ|æ—¥|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|jp|JP|Japan|ğŸ‡°ğŸ‡·|éŸ©|éŸ“|éŸ©å›½|éŸ“åœ‹|é¦–å°”|æœé²œ|kr|KR|KOR|Korea|South Korea|SouthKorea|ğŸ‡¸ğŸ‡¬|æ–°|ç‹®|æ–°åŠ å¡|ç‹®åŸ|sg|SG|Singapore|ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|ç¾åœ‹|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|us|US|United States|UnitedStates|America).)*$

- name: Chinese
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/chinese.png
  url: http://www.gstatic.com/generate_204
  interval: 600  
  lazy: true
  hidden: false
  include-all: true
  filter: ğŸ‡¨ğŸ‡³|ä¸­å›½|å¤§é™†|å›½å†…|å›å›½|cn|CN|CHINA|ç”µä¿¡|ç§»åŠ¨|è”é€š|è…¾è®¯|é˜¿é‡Œ|æ•™è‚²|æ ¡å›­|ç›´è¿

- name: Speedtest
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/speedtest.png
  proxies:
  - China
  - Pick
  - Node

- name: TikTok
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/tiktok.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  
- name: Telegram
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/telegram.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Discord
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/discord.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  
- name: Spotify
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/spotify.png
  proxies: 
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Netflix
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/netflix.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  
- name: Disney+
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/disney.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: YouTube
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/youtube.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: OpenAI
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/openai.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Amazon
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/amazon.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Facebook
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/facebook.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Google
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/google.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Microsoft
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/microsoft.png
  proxies:
  - China
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Apple
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/apple.png
  proxies:
  - China
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Global Media
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/streaming.png
  proxies:
  - Global
  - Pick

- name: Global
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/global.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  
- name: China Media
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/media.png
  proxies:
  - China
  - Pick
  
- name: China
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/china.png
  proxies:
  - DIRECT
  - Pick
  - Node
  - Wireless
  - Chinese

- name: Final
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/final.png 
  proxies:
  - Pick
  - Node
  - China
  - AdBlock

- name: AdBlock
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/adblock.png
  proxies:
  - REJECT
  - REJECT-DROP
  - China
  - Pick
  - Node

# ğŸ’¡ è¿œç¨‹åˆ†æµè§„åˆ™ï¼ˆdomain - text = ipcidr - text > domain = ipcidr > classicalï¼‰
rule-providers:
  ğŸš¥ Direct:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml
    interval: 86400
    
  ğŸš¥ Lan:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml
    interval: 86400
    
  â›” AntiAd:
    behavior: domain
    url: https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-clash.yaml
    interval: 86400

  â›” Privacy:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy_Domain.txt
    interval: 86400
    
  â›” Hijacking:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Hijacking/Hijacking.yaml
    interval: 86400
    
  â›” AdLite:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite_Domain.txt
    interval: 86400

  â›” HttpDNS:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BlockHttpDNS/BlockHttpDNS.yaml
    interval: 86400

  â›” Stun:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/STUN/STUN.yaml
    interval: 86400

  ğŸ•¸ï¸ Speedtest:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Speedtest/Speedtest.yaml
    interval: 86400
    
  ğŸµ TikTok:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml
    interval: 86400
    
  âœ‰ï¸ Telegram:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
    interval: 86400

  ğŸ—£ï¸ Discord:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Discord/Discord.yaml
    interval: 86400
    
  ğŸ¶ Spotify:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
    interval: 86400
        
  ğŸ“½ï¸ Netflix:
    behavior: ipcidr-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix_IP.txt
    interval: 86400
    
  ğŸ“¼ Disney+:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.yaml
    interval: 86400
    
  ğŸ“¹ YouTube:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
    interval: 86400    

  ğŸ¤– OpenAI:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    interval: 86400

  ğŸ›’ Amazon:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Amazon/Amazon.yaml
    interval: 86400

  ğŸ­ Facebook:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Facebook/Facebook.yaml
    interval: 86400
  
  ğŸ“Ÿ Google:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
    interval: 86400
    
  ğŸ–¥ï¸ Microsoft:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
    interval: 86400
    
  ğŸ Apple.ota:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SystemOTA/SystemOTA.yaml
    interval: 86400
    
  ğŸ Apple:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Domain.txt
    interval: 86400

  ğŸ¥ Global Media:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Domain.txt
    interval: 86400
    
  ğŸŒ Global:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Domain.txt
    interval: 86400
    
  ğŸ“º China Media:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.yaml
    interval: 86400
    
  ğŸ‡¨ğŸ‡³ China:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China_Domain.txt
    interval: 86400
    
  ğŸ‡¨ğŸ‡³ China.ips:
    behavior: ipcidr-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs_IP.txt
    interval: 86400

  ğŸ‡¨ğŸ‡³ China.bgp:
    behavior: ipcidr-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPsBGP/ChinaIPsBGP_IP.txt
    interval: 86400
    
# ğŸ’¡ è§„åˆ™ç±»å‹å¼•ç”¨ï¼ˆæŒ‡å®šè§„åˆ™ç±»å‹å¼•ç”¨ä»£ç†æˆ–ç­–ç•¥ç»„ï¼‰
rules:
- DOMAIN,openwrt.lan,China
- DOMAIN-SUFFIX,local,China
- DOMAIN-KEYWORD,localhost,China
- IP-CIDR,10.0.0.0/8,China,no-resolveã€€ã€€ã€€ã€€ã€€ã€€
- IP-CIDR,100.64.0.0/10,China,no-resolve
- IP-CIDR,127.0.0.0/8,China,no-resolve
- IP-CIDR,172.16.0.0/12,China,no-resolve
- IP-CIDR,192.168.0.0/16,China,no-resolve
- IP-CIDR,224.0.0.0/24,China,no-resolve
- IP-CIDR,169.254.0.0/16,China,no-resolve
- IP-CIDR,183.240.197.130/32,China,no-resolve
- IP-CIDR6,2620:0:2d0::/48,China,no-resolve
- IP-ASN,13335,Global,no-resolve
- DST-PORT,1400,Telegram 
- RULE-SET,ğŸš¥ Direct,China
- RULE-SET,ğŸš¥ Lan,China
- RULE-SET,â›” AntiAd,AdBlock
- RULE-SET,â›” Privacy,AdBlock
- RULE-SET,â›” Hijacking,AdBlock
- RULE-SET,â›” AdLite,AdBlock
- RULE-SET,â›” HttpDNS,AdBlock
- RULE-SET,â›” Stun,AdBlock
- RULE-SET,ğŸ•¸ï¸ Speedtest,Speedtest
- RULE-SET,ğŸµ TikTok,TikTok
- RULE-SET,âœ‰ï¸ Telegram,Telegram
- RULE-SET,ğŸ—£ï¸ Discord,Discord
- RULE-SET,ğŸ¶ Spotify,Spotify
- RULE-SET,ğŸ“½ï¸ Netflix,Netflix
- RULE-SET,ğŸ“¼ Disney+,Disney+
- RULE-SET,ğŸ“¹ YouTube,YouTube
- RULE-SET,ğŸ¤– OpenAI,OpenAI
- RULE-SET,ğŸ›’ Amazon,Amazon
- RULE-SET,ğŸ­ Facebook,Facebook
- RULE-SET,ğŸ“Ÿ Google,Google
- RULE-SET,ğŸ–¥ï¸ Microsoft,Microsoft
- RULE-SET,ğŸ Apple.ota,AdBlock,no-track # å±è”½ ios æ›´æ–°ï¼Œno-trackï¼šéšè—è¿æ¥
- RULE-SET,ğŸ Apple,Apple
- RULE-SET,ğŸ¥ Global Media,Global Media
- RULE-SET,ğŸŒ Global,Global
- RULE-SET,ğŸ“º China Media,China Media
- RULE-SET,ğŸ‡¨ğŸ‡³ China,China
- RULE-SET,ğŸ‡¨ğŸ‡³ China.ips,China
- RULE-SET,ğŸ‡¨ğŸ‡³ China.bgp,China
- SCRIPT,quic,AdBlock
- GEOIP,CN,China
- MATCH,Final
