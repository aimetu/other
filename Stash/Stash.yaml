# 2025.03.30
# 官网：https://stash.wiki
# 配置样例：https://stash.wiki/configuration/example-config

# 各个模块说明「基于 stash 2.7.0 制作」
# 注意：去掉前面的注释符号 "#" 该行生效，（开启关闭参数：true/false）
# 规则逻辑：排在前面的优先级高于后面的，本地规则 > 插件规则 > 订阅规则

# other 设置补充说明
# 自定义 geoip & ipasn 数据库
# https://github.com/Hackl0us/GeoIP2-CN
# https://github.com/Loyalsoldier/geoip
# https://github.com/P3TERX/GeoLite.mmdb
# https://github.com/MetaCubeX/meta-rules-dat

# 图标订阅「更多 -ui 配置 - 图标集」
# aimetu 108*108 图标
# https://raw.githubusercontent.com/aimetu/icons/main/icons.json

# http 本地服务器「浏览器打开」
# boxjs 订阅脚本挂载 substore 本地订阅转换
# http://boxjs.com
# https://sub.store

# boxjs 订阅脚本
# https://raw.githubusercontent.com/Peng-YM/QuanX/master/Tasks/box.js.json
# https://raw.githubusercontent.com/evilbutcher/Quantumult_X/master/evilbutcher.boxjs.json
# https://qxnav.com/rules/QuantumultX/qixin.boxjs.json
# https://raw.githubusercontent.com/xream/scripts/main/boxjs/boxjs.json

# 网络连通性检查使用的 url
# http://1.1.1.1/generate_204
# http://www.google.com/generate_204
# http://www.gstatic.com/generate_204
# http://www.msftncsi.com/ncsi.txt
# http://www.msftconnecttest.com/connecttest.txt
# http://captive.apple.com/hotspot-detect.html

# 💡 通用设置
# 网络模式：rule 规则、global 代理、direct 直连
mode: rule

# 日志模式：silent 静默、info 信息、warning 警告、error 错误、debug 调试
log-level: info

# 💡 代理服务信息在主页显示
subscribe-url: http://sub.store/download/collection/node

# 💡 远程代理服务器订阅链接
proxy-providers:
  Subscribe:
    url: http://sub.store/download/collection/node
    interval: 86400
    filter: "^(?!.*订阅|流量|剩余|套餐|到期|重置|距离|过期|线路|官网|网站|网址|地址|备用|客服|群|邀请|返利|循环|已用|联系|邮箱).*(?i)"
    benchmark-url: http://www.gstatic.com/generate_204
    benchmark-timeout: 3
   
# 💡 本地代理服务器
proxies:
 - name: 🌤️ Warp
   type: wireguard
   # wireguard 代理服务器地址：engage.cloudflareclient.com，162.159.192-195.0/24，（udp 端口:2408，备选 500、1701、4500）
   port: 2408
   ip: 172.16.0.2
   ipv6: 2606:4700:110:88a4:fa34:70a2:56b7:ead6
   private-key: nvWCeA9If1axAV3HnZ5oCsck6aPb/+I/+yhbPorfSFU=
   public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=
   dns: [1.1.1.1,2606:4700:4700::1111]
   mtu: 1280
   reserved: [17,176,6]
   keepalive: 45
   benchmark-url: http://cp.cloudflare.com/generate_204
   benchmark-timeout: 3
# 若使用 underlying-proxy，其必须支持 udp 中继，建议使用 udp over tcp 的协议（如 trojan、vless、vmess、snell ）  
#   underlying-proxy: 
#     type: trojan
#     server: your-underlying-proxy
#     port: 443
#     password: your-password

 - name: 🌤️ Warp Workers
   type: vless
   server: jinxiutu.pages.dev
   port: 443
   uuid: 38966bb4-c2a2-4010-8663-25db09980b2b
   tls: true
   skip-cert-verify: true
   sni: jinxiutu.pages.dev
   network: ws
   ws-opts:
     path: "/?ed=2560"
     headers:
       Host: jinxiutu.pages.dev
   alterId: 0
   cipher: ""
   flow: ""

 - name: 🌤️ Warp Pages
   type: vless
   server: jinqiantu.pages.dev
   port: 443
   uuid: 58935f45-89c2-4b82-a77c-72eee801da09
   tls: true
   skip-cert-verify: true
   sni: jinqiantu.pages.dev
   network: ws
   ws-opts:
     path: "/?ed=2560"
     headers:
       Host: jinqiantu.pages.dev
   alterId: 0
   cipher: ""
   flow: ""

# 💡 dns 服务器配置
dns:
# 跳过证书验证，解决部分兼容性问题
  skip-cert-verify: true
# 默认情况下 dns 查询会直接出站不经过代理规则,开启后会根据代理规则进行 dns 查询的转发
  follow-rule: false
# 以下域名不会被解析为 fake-ip，解析请求将返回它们真实的 IP 地址
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "localhost"
    - "WORKGROUP"
    - "*.msftncsi.com"
    - "*.msftconnecttest.com"
    - "cable.auth.com"
    - "captive.apple.com"
    - "*.cmpassport.com"
    - "id6.me"
    - "open.e.189.cn"
    - "mob.com"
    - "hmrz.wo.cn"
    - "auth.wosms.cn"
    - "mdn.open.wo.cn"
    - "id.mail.wo.cn"
    - "opencloud.wostore.cn"
    - "nishub1.10010.com"
    - "enrichgw.10010.com"
    - "localhost.*.qq.com"
    - "localhost.*.weixin.qq.com"
    
# 默认 dns 服务器只会被用来解析 dns 服务的域名，仅允许 ip 地址
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    
# 支持 udp、tcp、dot、doh、doq 协议的 dns 服务，可指定端口，并发响应最快服务
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
    
# geoip 过滤 cn 以外的地址，指定到 fallback  
  fallback-filter:
    geoip: false
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      
# 当 geoip 不是 cn 时用以下 dns 解析 
  fallback:
    - https://cloudflare-dns.com/dns-query
    - https://dns.opendns.com/dns-query

# 域名使用指定的 dns 服务器解析
  nameserver-policy:
    "blog.google": 208.67.222.222
    "dl.google.com": https://dns.opendns.com/dns-query
    "dl.l.google.com": https://dns.opendns.com/dns-query
    "update.googleapis.com": quic://dns.alidns.com

# 💡 本地域名映射
hosts:
  "*.clash.dev": 127.0.0.1
  "*.dev": 127.0.0.1
  "alpha.clash.dev": '::1'
  "talk.google.com": 108.177.125.188
  "mtalk.google.com": 108.177.125.188

# 💡 http 引擎相关
http:
# 强制使用 http 引擎处理 tcp 连接 
  force-http-engine:
    - sub.store

# 开启 mitm 功能的域名列表,需安装证书并信任
  mitm:
    - "*.g.cn"
    - "*.google.cn"
    
# https-url 重写支持 header、302、307、reject 多种策略
  url-rewrite:
    - ^https?:\/\/(www|m)\.(g|google)\.cn http://www.google.com header
    - ^https?:\/\/(ditu|maps)\.google\.cn https://www.google.com 302

# https-header 重写允许用户增加、删除、替换 http 请求/响应的任意 header
  header-rewrite:
    - ^https?:\/\/(www|m)\.(g|google)\.cn request-add DNT 1
    - ^https?:\/\/(www|m)\.(g|google)\.cn request-del DNT
    - ^https?:\/\/(www|m)\.(g|google)\.cn request-replace DNT 1
    - ^https?:\/\/(www|m)\.(g|google)\.cn request-replace-regex User-Agent Go-http-client curl

# 定时 javascript 脚本任务
cron:
  script:
    - name: ip-tile  # 引用 script-providers 中的脚本
      cron: '0 0 * * *'  # cron 表达式，具体表达示参考：https://crontab.guru
      timeout: 10   # script timeout in second ( optional )
      argument: ''  # script argument ( optional )
      debug: false  # 开发模式，每次执行前会从 provider 加载最新脚本
      
    - name: network-tile
      cron: '0 0 * * *'
      timeout: 10
      argument: ''
      debug: false
      
    - name: timecard-tile
      cron: '0 8 * * *'
      timeout: 10
      argument: ''
      debug: false
      
# 首页 tile 面板
tiles: 
  - name: ip-tile
    interval: 3600
    title: 网络信息查询
    content: 正在查询请稍候
    icon: https://raw.githubusercontent.com/aimetu/icons/main/other/geoip.png
    backgroundColor: '#00a6ac'
    
  - name: network-tile
    interval: 3600
    title: 网络信息查询
    content: 正在查询请稍候
    icon: https://raw.githubusercontent.com/aimetu/icons/main/other/network.png
    backgroundColor: '#00a6ac'

  - name: timecard-tile
    interval: 259200
    title: 节假日信息查询
    content: 漫长的等待中
    icon: https://raw.githubusercontent.com/aimetu/icons/main/other/calendar.png
    backgroundColor: '#b3424a'

# 远程资源脚本模式
script-providers:
  ip-tile:
    url: https://raw.githubusercontent.com/aimetu/other/main/Stash/ip.js
    interval: 259200
    
  network-tile:
    url: https://raw.githubusercontent.com/aimetu/other/main/Stash/network.js
    interval: 259200
    
  timecard-tile:
    url: https://raw.githubusercontent.com/smartmimi/conf/master/surge/timecard.js
    interval: 259200

# 💡 策略组
proxy-groups: 
- name: Pick
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/pick.png
  benchmark-url: http://www.gstatic.com/generate_204
  benchmark-timeout: 3
  proxies:
  - Auto
  - Node
  - Wireless
  - Fallback
  - Load Balance
  - Proxy Chain
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  - Chinese
  - DIRECT
  - REJECT

- name: Auto
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/auto.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
# 网络间隔相差值，进行节点切换，否则不进行切换
  tolerance: 0
# 延迟测试超时，单位：秒
  benchmark-timeout: 3
# lazy：懒惰模式，如果设置为 true，策略组在未被使用时停止检测  
  lazy: true
# hidden 在列表中隐藏策略组开关
  hidden: false
# include-all: true，引用所有的代理和远程代理集  
  include-all: true
  filter: ^(?!.*Warp).*(?i)

- name: Node
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/node.png
  benchmark-url: http://www.gstatic.com/generate_204
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true

- name: Wireless
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/wireless.png
  benchmark-url: http://www.gstatic.com/generate_204
  benchmark-timeout: 3
  lazy: true
  hidden: false
  proxies:
  - Auto
  - Node
  - DIRECT
  ssid-policy:
    cellular: Node 
    default: Auto
    OpenWrt: DIRECT 
    OpenWrt_5G: DIRECT

# Fallback：在确保服务器可用的情况下，由上至下自动选择服务器，不健康的代理会被跳过  
- name: Fallback
  type: fallback
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/fallback.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  proxies:
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
    
# Load Balance：能充分利用多个代理的带宽，不健康的代理会被跳过
- name: Load Balance
  type: load-balance
# strategy: consistent-hashing、round-robin，一般建议设置为 consistent-hashing，避免频繁改变 ip 触发服务端的安全策略 
  strategy: consistent-hashing
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/load.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  proxies:
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

# 代理转发链，流量将通过一系列的代理转发到达目的地，仅支持转发 tcp。relay 策略组并不受到内部代理延迟测试的结果影响，需要单独指定测试 url
- name: Proxy Chain
  type: relay
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/chain.png
# 建议只使用 HTTP 协议  
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
# 流量: stash <-> http <-> vmess <-> ss1 <-> ss2 <-> 互联网
  proxies:
    - HongKong
    - 🌤️ Warp

- name: HongKong
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/hongkong.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true
  filter: (?i)(🇭🇰|香港|hk|hong|hongkong)
  
- name: Taiwan
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/taiwan.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true
  filter: (?i)(🇹🇼|台湾|台北|臺灣|tw|tai|taiwan)
  
- name: Japan
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/japan.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true
  filter: (?i)(🇯🇵|日本|川日|东京|大阪|泉日|埼玉|沪日|深日|jp|japan)
  
- name: Korea
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/korea.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true
  filter: (?i)(🇰🇷|韩国|韓國|首尔|朝鲜|kr|kor|korea)
  
- name: Singapore
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/singapore.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true
  filter: (?i)(🇸🇬|新加坡|狮城|sg|singapore)
  
- name: America
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/america.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true
  filter: (?i)(🇺🇸|美国|美國|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|us|america)
    
- name: Nations
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/nations.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true
  filter: ^((?!Warp|🇨🇳|中国|大陆|国内|回国|cn|china|电信|移动|联通|腾讯|阿里|教育|校园|直连|🇭🇰|香港|hk|hong|hongkong|🇹🇼|台湾|台北|臺灣|tw|tai|taiwan|🇯🇵|日本|川日|东京|大阪|泉日|埼玉|沪日|深日|jp|japan|🇰🇷|韩国|韓國|首尔|朝鲜|kr|kor|korea|🇸🇬|新加坡|狮城|sg|singapore|🇺🇸|美国|美國|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|us|america).)*$

- name: Chinese
  type: url-test
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/chinese.png
  benchmark-url: http://www.gstatic.com/generate_204
  interval: 600
  tolerance: 0
  benchmark-timeout: 3
  lazy: true
  hidden: false
  include-all: true
  filter: (?i)(🇨🇳|中国|大陆|国内|回国|cn|china|电信|移动|联通|腾讯|阿里|教育|校园|直连)

- name: Speedtest
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/speedtest.png
  proxies:
  - China
  - Pick
  - Node

- name: TikTok
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/tiktok.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  - China
  
- name: Telegram
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/telegram.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Discord
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/discord.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  
- name: Spotify
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/spotify.png
  proxies: 
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Netflix
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/netflix.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  
- name: Disney+
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/disney.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: YouTube
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/youtube.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: OpenAI
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/openai.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Amazon
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/amazon.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Facebook
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/facebook.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Google
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/google.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Microsoft
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/microsoft.png
  proxies:
  - China
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Apple
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/logo/apple.png
  proxies:
  - China
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations

- name: Global Media
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/streaming.png
  proxies:
  - Global
  - Pick

- name: Global
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/global.png
  proxies:
  - Pick
  - Node
  - HongKong
  - Taiwan
  - Japan
  - Korea
  - Singapore
  - America
  - Nations
  
- name: China Media
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/media.png
  proxies:
  - China
  - Pick
  
- name: China
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/map/china.png
  proxies:
  - DIRECT
  - Pick
  - Node
  - Wireless
  - Chinese

- name: Final
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/final.png 
  proxies:
  - Pick
  - Node
  - China
  - AdBlock

- name: AdBlock
  type: select
  icon: https://raw.githubusercontent.com/aimetu/icons/main/other/adblock.png
  proxies:
  - REJECT
  - REJECT-DROP
  - China
  - Pick
  - Node

# 💡 远程分流规则（domain - text = ipcidr - text > domain = ipcidr > classical）
rule-providers:
  🚥 Direct:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml
    interval: 259200
    
  🚥 Lan:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml
    interval: 259200

  ⛔ Privacy:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy_Domain.txt
    interval: 259200
    
  ⛔ Hijacking:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Hijacking/Hijacking.yaml
    interval: 259200
    
  ⛔ AdLite:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite_Domain.txt
    interval: 259200

  ⛔ HttpDNS:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BlockHttpDNS/BlockHttpDNS.yaml
    interval: 259200

  🕸️ Speedtest:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Speedtest/Speedtest.yaml
    interval: 259200
    
  🎵 TikTok:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml
    interval: 259200
    
  ✉️ Telegram:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
    interval: 259200

  🗣️ Discord:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Discord/Discord.yaml
    interval: 259200
    
  🎶 Spotify:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
    interval: 259200
        
  📽️ Netflix:
    behavior: ipcidr-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix_IP.txt
    interval: 259200
    
  📼 Disney+:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.yaml
    interval: 259200
    
  📹 YouTube:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
    interval: 259200    

  🤖 OpenAI:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    interval: 259200

  🛒 Amazon:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Amazon/Amazon.yaml
    interval: 259200

  🎭 Facebook:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Facebook/Facebook.yaml
    interval: 259200
  
  📟 Google:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
    interval: 259200
    
  🖥️ Microsoft:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
    interval: 259200
    
  🍎 Apple.ota:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SystemOTA/SystemOTA.yaml
    interval: 259200
    
  🍎 Apple:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Domain.txt
    interval: 259200

  🎥 Global Media:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Domain.txt
    interval: 259200
    
  🌐 Global:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Domain.txt
    interval: 259200
    
  📺 China Media:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.yaml
    interval: 259200
    
  🇨🇳 China:
    behavior: domain-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China_Domain.txt
    interval: 259200
    
  🇨🇳 China.ips:
    behavior: ipcidr-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs_IP.txt
    interval: 259200

  🇨🇳 China.bgp:
    behavior: ipcidr-text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPsBGP/ChinaIPsBGP_IP.txt
    interval: 259200
    
# 💡 规则类型引用（指定规则类型引用代理或策略组）
rules:
- DOMAIN, router.local, China
- DOMAIN-SUFFIX, home.arpa, China
- DOMAIN-KEYWORD, localhost, China
- DOMAIN-WILDCARD, *.tv.apple.*, Global
- DOMAIN-REGEX, ^.*\.news\.apple\.com, Global
- DOMAIN-REGEX, ^.*\.trustd\.apple\.com, Global
- URL-REGEX, ^https?:\/\/(www|m)\.google\.cn, Google
- USER-AGENT, AppleTV*, Global
- USER-AGENT, AppleNews*, Global
- IP-CIDR, 10.0.0.0/8, China, no-resolve　　　　　　
- IP-CIDR, 100.64.0.0/10, China, no-resolve
- IP-CIDR, 127.0.0.0/8, China, no-resolve
- IP-CIDR, 172.16.0.0/12, China, no-resolve
- IP-CIDR, 192.168.0.0/16, China, no-resolve
- IP-CIDR, 224.0.0.0/24, China, no-resolve
- IP-CIDR, 169.254.0.0/16, China, no-resolve
- IP-CIDR, 183.240.197.130/32, China, no-resolve
- IP-CIDR6, 2620:0:2d0::/48, China, no-resolve
- IP-ASN, 20940, Global
- DST-PORT, 1400, Telegram
- AND, ((DOMAIN-SUFFIX, bilibili.com), (NETWORK, UDP), (DST-PORT, 4483)), AdBlock # AND：规则内的条件都必须满足时才会匹配
- AND, ((DOMAIN-SUFFIX, bilibili.com), (NETWORK, UDP), (DST-PORT, 9305)), AdBlock 
- AND, ((NETWORK, UDP), (DST-PORT, 443)), AdBlock # NETWORK：可选值 tcp, udp
- AND, ((NETWORK, UDP), (DST-PORT, 3478)), AdBlock
- AND, ((NETWORK, UDP), (DST-PORT, 19302)), AdBlock
- AND, ((DOMAIN-SUFFIX, bilibili.com), (PROTOCOL, UDP), (DST-PORT, 4483)), AdBlock # PROTOCOL：可选值 TCP, HTTP, HTTPS, UDP, QUIC
- AND, ((DOMAIN-SUFFIX, bilibili.com), (PROTOCOL, UDP), (DST-PORT, 9305)), AdBlock
- OR, ((DOMAIN-KEYWORD, httpdns), (DOMAIN-KEYWORD, httpsdns)), AdBlock  # OR：规则内的条件只需满足一项时匹配
- OR, ((DOMAIN-KEYWORD, p2ptun), (DOMAIN-KEYWORD, p2plive), (DOMAIN-KEYWORD, p2plog)), AdBlock
#- NOT, ((GEOIP, CN, no-resolve)), Global # NOT：规则内不包含的条件时匹配
- RULE-SET, 🚥 Direct, China
- RULE-SET, 🚥 Lan, China
- RULE-SET, ⛔ Privacy, AdBlock
- RULE-SET, ⛔ Hijacking, AdBlock
- RULE-SET, ⛔ AdLite, AdBlock
- RULE-SET, ⛔ HttpDNS, AdBlock
- RULE-SET, 🕸️ Speedtest, Speedtest
- RULE-SET, 🎵 TikTok, TikTok
- RULE-SET, ✉️ Telegram, Telegram
- RULE-SET, 🗣️ Discord, Discord
- RULE-SET, 🎶 Spotify, Spotify
- RULE-SET, 📽️ Netflix, Netflix
- RULE-SET, 📼 Disney+, Disney+
- RULE-SET, 📹 YouTube, YouTube
- RULE-SET, 🤖 OpenAI, OpenAI
- RULE-SET, 🛒 Amazon, Amazon
- RULE-SET, 🎭 Facebook, Facebook
- RULE-SET, 📟 Google, Google
- RULE-SET, 🖥️ Microsoft, Microsoft
- RULE-SET, 🍎 Apple.ota, AdBlock, no-track # 屏蔽 ios 更新，no-track：隐藏连接
- RULE-SET, 🍎 Apple, Apple
- RULE-SET, 🎥 Global Media, Global Media
- RULE-SET, 🌐 Global, Global
- RULE-SET, 📺 China Media, China Media
- RULE-SET, 🇨🇳 China, China
- RULE-SET, 🇨🇳 China.ips, China
- RULE-SET, 🇨🇳 China.bgp, China
- GEOIP, CN, China
- MATCH, Final
